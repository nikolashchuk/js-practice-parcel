!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o);var a={form:document.querySelector(".js-search-form"),list:document.querySelector(".js-gallery"),backdroap:document.querySelector("[data-load]"),spinner:document.querySelector(".js-spinner")},i=o("8MBJY"),l=o("4KMWL"),s=o("8MQK7"),u=o("dPxxm"),c=o("a2hTj"),h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,y=new WeakMap,g=function(){"use strict";function t(){e(i)(this,t),e(s)(this,h,{writable:!0,value:"https://api.unsplash.com/search/photos"}),e(s)(this,f,{writable:!0,value:"LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc"}),e(s)(this,d,{writable:!0,value:""}),e(s)(this,p,{writable:!0,value:1}),e(s)(this,v,{writable:!0,value:15}),e(s)(this,y,{writable:!0,value:0})}return e(c)(t,[{key:"getPhotos",value:function(){return fetch("".concat(e(l)(this,h),"?client_id=").concat(e(l)(this,f),"&page=").concat(e(l)(this,p),"&query=").concat(e(l)(this,d),"&per_page=").concat(e(l)(this,v),"&color=black_and_white&orientation=landscape")).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}},{key:"setTotalPhotos",value:function(t){e(u)(this,y,t)}},{key:"hasMorePhotos",value:function(){return e(l)(this,p)<Math.ceil(e(l)(this,y)/e(l)(this,v))}},{key:"incrementPage",value:function(){e(u)(this,p,e(l)(this,p)+1)}},{key:"resetPage",value:function(){e(u)(this,p,1)}},{key:"query",get:function(){return e(l)(this,d)},set:function(t){e(u)(this,d,t)}}]),t}(),w=o("1KhuP"),m=o("j1lrD"),b=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(console.log(e.target),t.unobserve(e.target),M.incrementPage(),(0,m.spinnerPlay)(),M.getPhotos().then((function(e){var n=e.results,r=(0,w.createGalleryCards)(n);if(a.list.insertAdjacentHTML("beforeend",r),M.hasMorePhotos()){var o=document.querySelector(".gallery__item:last-child");t.observe(o)}})).catch((function(e){return console.log(e)})).finally((function(){(0,m.spinnerStop)()})))}))}),{root:null,rootMargin:"100px",threshold:1});a.form.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget.elements.query.value;if(console.log(t),!t)return alert("input any data");a.list.innerHTML="",M.resetPage(),M.query=t,(0,m.spinnerPlay)(),M.getPhotos().then((function(e){var t=e.results,n=e.total;if(0===t.length)return alert("enter normal value");var r=(0,w.createGalleryCards)(t);if(a.list.insertAdjacentHTML("beforeend",r),M.setTotalPhotos(n),M.hasMorePhotos()){var o=document.querySelector(".gallery__item:last-child");b.observe(o)}})).catch((function(e){return console.log(e)})).finally((function(){(0,m.spinnerStop)()}))}));var M=new g}();
//# sourceMappingURL=infifnite-scroll.10ee0868.js.map
