function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired7c6=o);const s={form:document.querySelector(".js-search-form"),list:document.querySelector(".js-gallery"),backdroap:document.querySelector("[data-load]"),spinner:document.querySelector(".js-spinner")};var a=o("jkMrE"),l=o("g6yUq"),i=o("gMe87"),c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap;var g=o("3huUq"),y=o("04jNI");const w=new IntersectionObserver((function(e,t){e.forEach((e=>{e.isIntersecting&&(console.log(e.target),t.unobserve(e.target),v.incrementPage(),(0,y.spinnerPlay)(),v.getPhotos().then((({results:e})=>{const r=(0,g.createGalleryCards)(e);s.list.insertAdjacentHTML("beforeend",r);if(v.hasMorePhotos()){const e=document.querySelector(".gallery__item:last-child");t.observe(e)}})).catch((e=>console.log(e))).finally((()=>{(0,y.spinnerStop)()})))}))}),{root:null,rootMargin:"100px",threshold:1});s.form.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget.elements.query.value;if(console.log(t),!t)return alert("input any data");s.list.innerHTML="",v.resetPage(),v.query=t,(0,y.spinnerPlay)(),v.getPhotos().then((({results:e,total:t})=>{if(0===e.length)return alert("enter normal value");const r=(0,g.createGalleryCards)(e);s.list.insertAdjacentHTML("beforeend",r),v.setTotalPhotos(t);if(v.hasMorePhotos()){const e=document.querySelector(".gallery__item:last-child");w.observe(e)}})).catch((e=>console.log(e))).finally((()=>{(0,y.spinnerStop)()}))}));const v=new class{getPhotos(){return fetch(`${e(a)(this,c)}?client_id=${e(a)(this,u)}&page=${e(a)(this,d)}&query=${e(a)(this,h)}&per_page=${e(a)(this,p)}&color=black_and_white&orientation=landscape`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}setTotalPhotos(t){e(i)(this,f,t)}hasMorePhotos(){return e(a)(this,d)<Math.ceil(e(a)(this,f)/e(a)(this,p))}incrementPage(){e(i)(this,d,e(a)(this,d)+1)}resetPage(){e(i)(this,d,1)}get query(){return e(a)(this,h)}set query(t){e(i)(this,h,t)}constructor(){e(l)(this,c,{writable:!0,value:"https://api.unsplash.com/search/photos"}),e(l)(this,u,{writable:!0,value:"LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc"}),e(l)(this,h,{writable:!0,value:""}),e(l)(this,d,{writable:!0,value:1}),e(l)(this,p,{writable:!0,value:15}),e(l)(this,f,{writable:!0,value:0})}};
//# sourceMappingURL=infifnite-scroll.cb5dbac6.js.map
